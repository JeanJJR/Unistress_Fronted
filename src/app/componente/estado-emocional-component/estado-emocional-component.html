<div class="main-content">
  <h2 class="page-title">Estado Emocional</h2>

  <!-- Registro Diario -->
  <section class="registro-diario">
    <div class="header">Registro Diario</div>
    <div class="content">
      <div class="emocion-nivel-container">
        <!-- Emociones -->
        <div class="emocion-seccion">
          <p>Â¿CÃ³mo te sientes hoy?</p>
          <div class="emojis">
            <button type="button" (click)="emocionSeleccionada = 'feliz'" [class.selected]="emocionSeleccionada === 'feliz'">ğŸ˜Š</button>
            <button type="button" (click)="emocionSeleccionada = 'triste'" [class.selected]="emocionSeleccionada === 'triste'">ğŸ˜¢</button>
            <button type="button" (click)="emocionSeleccionada = 'enojado'" [class.selected]="emocionSeleccionada === 'enojado'">ğŸ˜ </button>
            <button type="button" (click)="emocionSeleccionada = 'ansioso'" [class.selected]="emocionSeleccionada === 'ansioso'">ğŸ˜Ÿ</button>
            <button type="button" (click)="emocionSeleccionada = 'neutral'" [class.selected]="emocionSeleccionada === 'neutral'">ğŸ˜</button>
          </div>
        </div>

        <!-- Nivel -->
        <div class="nivel-seccion">
          <label>Nivel (1â€“10):</label>
          <input type="range" min="1" max="10" [(ngModel)]="nivel" />
          <span class="nivel-valor">{{ nivel }}</span>
        </div>
      </div>

      <div class="comentario">
        <label>DescripciÃ³n:</label>
        <textarea
          [(ngModel)]="comentario"
          placeholder="Escribe cÃ³mo te sientes..."
          rows="3"
        ></textarea>
      </div>

      <button class="btn-primary" (click)="guardarEmocion()">Registrar emociÃ³n</button>
    </div>
  </section>

  <!-- Historial -->
  <section class="historial-emociones">
    <div class="header">Historial de emociones</div>
    <div class="content">
      <table class="emociones-table">
        <thead>
        <tr>
          <th>Fecha</th>
          <th>EmociÃ³n</th>
          <th>Nivel</th>
          <th>DescripciÃ³n</th>
        </tr>
        </thead>
        <tbody>
          @if (historial.length > 0) {
            @for (item of historial; track item.id) {
              <tr>
                <td>{{ item.id ? 'Hoy' : 'â€”' }}</td>
                <td>
                  @switch (item.emocion) {
                    @case ('feliz') { ğŸ˜Š }
                    @case ('triste') { ğŸ˜¢ }
                    @case ('enojado') { ğŸ˜  }
                    @case ('ansioso') { ğŸ˜Ÿ }
                    @case ('neutral') { ğŸ˜ }
                  }
                </td>
                <td>{{ item.nivel }}/10</td>
                <td>{{ item.descripcion }}</td>
              </tr>
            }
          } @else {
            <tr><td colspan="4" class="empty">No hay registros</td></tr>
          }
        </tbody>
      </table>
    </div>
  </section>
</div>
